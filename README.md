# airflow-rest-api-openlibrary
 Airflow-orchestrated pipeline that uses the Open Library Web APIs (books, authors and covers APIs) to fetch information about a random book, its authors and possibly a thumbnail of its cover. The pipeline will be scheduled to run every day.

 The DAG consists of the following tasks:
 
![book_of_the_day_DAG](https://github.com/user-attachments/assets/18491be9-e453-4c25-962f-fee84712a94e)

start: an empty task marking the start of the DAG. It doesn't include any behavior.

get_random_book: sends a request to the Open Library Books API to fetch information about a random book (such as the book title, version and subjects, the keys or identifiers of its authors, and maybe the keys of its cover images). In this task, you will save the returned information to a JSON file labeled as initial_info_<LOGICAL_DATE>.json stored in an S3 bucket. The logical_date, in the name of the JSON file, represents the start of the data interval. This file is temporary and will be deleted in the cleanup task. The response from the API would look like as follows:

<img width="617" alt="image" src="https://github.com/user-attachments/assets/a84d5699-ef0c-4495-b4ed-b2d6460493cd">



get_authors: uses the authors' keys stored in the initial_info_<LOGICAL_DATE>.json file to send the necessary requests to the Open Library Authors API to fetch the names of the authors. In this task, you will save the returned names to a JSON file labeled as author_names_<LOGICAL_DATE>.json stored in an S3 bucket. This file is also temporary and will be deleted in the cleanup task.The response from the API would look like as follows:

<img width="610" alt="image" src="https://github.com/user-attachments/assets/f736bab7-9fdc-49d9-b53a-08af9a60772f">

From this response, we will extract the names of the authors and save them to the author_names_<LOGICAL_DATE>.json file in the Raw Data Bucket. We will store the names of the authors as a list as follows:

<img width="615" alt="image" src="https://github.com/user-attachments/assets/3ff6f3c5-c2a9-4ed5-a382-f1e5113566da">




get_cover: uses the covers' identifiers stored in the initial_info_<LOGICAL_DATE>.json file, to send a request to the Open Library Covers API to retrieve the book's first available cover image, and save it to the cover_<LOGICAL_DATE>.jpg file in an S3 bucket. If no covers are available, no file is saved.

save_final_book_record: uses information from the initial_info_<LOGICAL_DATE>.json and author_names_<LOGICAL_DATE>.json files, and the link to cover_<LOGICAL_DATE>.jpg image (if it exists), to create the final book record that will be kept to describe the Book of the Day. You will save the final book record to a JSON file labeled as book_record_<LOGICAL_DATE>.jsonstored in an S3 bucket.

cleanup: deletes the intermediate files generated by the get_random_book and get_authors tasks. The intermediate files are no longer needed after the creation of the book record since they contain information about both the book title and its authors' names.

end: an empty task marking the end of the DAG. It doesn't include any behavior.

We will create the start_task and end_task using the EmptyOperator, and the rest of the tasks using the PythonOperator.
